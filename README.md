# MASSA_BMESH_CONSOLE

massa

## Dependencies

> pip install fake-bpy-module-latest
> pip install -r MASSA_BMESH_CONSOLE-main/MCP/requirements.txt

## Debugging methods

### Error debugging triggers

- if there is an error that stops the installation or generation of the addon. Attempt to fix the source of the error (Cartridge) and not modify the system files, just the cartridges, unless specified to.

- If an error prohibits the Cartridges geometry script from generating. Attempt to fix (Repair) cartridge to work without loosing parameters and functionality.

- If any of the parameters in the Redo menu create errors when changing. (Use the Redo panel to test the parameters in 'Shape' tab of the console.)

### Telemetry debugging triggers

[important : telemetry scan must deliver an accurate measurement statistics and visualization to the MCP agent!]

- Incorrect mesh generation (failed attempt at geometry scripting). IF the geometry cartridge's desired values do not align with the audit, Attempt to fix the cartridge script until the desired result is measured and correctly generating.

- discover hidden faced (unnecessary), zero face issues (doubling faces). Fix by re-writing the geometry cartridge script to delete the ghost faces, and zero fighting issues between the geometry cartridges. Cleaning the mesh.

### Slot Debugging triggers

[The agent must see the face IDs that the cartridge generates]

- Audit Face Slots. Determines wether the current slots names, placement, and material/physics ID tag (and Shader) are applied correctly

### Edge Slot Debugging triggers

#### IMPORTANT : The MCP server must accurately parse the objects wireframe topology. Visual parsing can be VERY important here to create an intellegent seam finder within the MCP

- Visualize Seam Placement Visually parses the selected object and its topology and places seams according to how the seams (Edge slot) should be placed on the shapes within the cartridges, allowing them to unwrap upon generation.

- Reattempt Seams (if undesired seam results) attempt re-visualized the geometry and try another attempt at the seams until the UV unwrap shows no pinching UV maps.

******************
    --> DESCRIPTION : @MASSA_BMESH_CONSOLE-main  
is a functioning Blender 5.0 addon that generates bmesh cartridges in the n-panel and opens them up in the redo panel. The Redo panel then gives options to change the cartridges 'Shape' (geometry shape parameters) , 'Data' (added vertex data), 'Polish' (bmesh modifiers), UVs (auto-seam and UV options), 'Slots' (attach materials , physics ID's to faces), and 'Edges' (Edge slots 1-4).

PROBLEM : <--
******************************

This is a bmesh focused procedural geometry generator.
The geometry 'shapes' are generated by Cartridges and those sit on top of a Console.

The idea was to make the geometry script itself (the Cartridge) as small as possible while still
exporting 'slot', 'uv' seam data, and compliant attribute information.
The smallest Cart is 82 lines with all Console data, which i think is a win.

This is an 'in the box' set up that almost doesnt even feel like Blender.
Its mainly just python geometry : bmesh attached to more python vector and attribute logic.
All activated parameters are pasted onto the model at the same time its being generated, literally.

In steps here after generation there are addons i have that can change the vertex paint, or polish modifiers, or UVs down the line so that manual modifacations can be made to the meshes and be fixed after.

    ## --Primitive Library-- ##

there was a goal with the 'Primitive construction Library' idea i had.. was to make slots, sockets, uvs perfect, and edges designed for 30-40 primitives that are used in construction almost constantly. This way i can prompt more advanced assemblies and "use the logic of" prompt will curve python mesh generation much more smoothly.

    ## --Slots-- ##

My pride and joy.. you could use them for face IDs, but their main purpose is to define the physical material of each object within the assembly. Later in time when good simulations become cheaper, there will be a house generator with 10 different parts, 10 different materials, ready to go..

    ## --Prompting Bmesh Cartridges-- ##

LLMs favorite language is python.. im calling it.. its just too good at it..
I have mainly used Gemini (multimodal model) for generating these scripts and the face multimodal models are trained on nearly the same amount of image tokens as language tokens is likely a little wind in the sails..
I have workflows to prompt, repair and optimize these scripts.. they are very managable because the Cartridge size..

    ## --modifying the 'Console' -- ##

just dont.. it fallows a rule of 5, which means many of the references are needed across 5 separate files.
if you stuff it in Jules then you might have a chance.

Based on my re-analysis of the MCP/skills directory, here are the MCP server tools currently defined in each file, including the newly added tools:

1. cartridge_forge.py
Tools for creating, managing, and versioning geometry cartridges.

create_primitive_cartridge
: Generates a new BMesh cartridge from primitives (Cube, Cylinder, etc.).
write_cartridge_script
: Writes raw Python code to a cartridge file (for Redo/Fixes).
read_cartridge_script
: Reads the content of an existing cartridge.
list_geometry_cartridges
 (NEW): Lists all available geometry cartridge files in the library.
duplicate_cartridge
 (NEW): Creates a copy/backup of a cartridge for versioning.

1. inspector.py
Tools for auditing, verifying, and visualizing geometry data.

audit_cartridge_geometry
: Runs the headless "Shadow Audit" (Phase 6) for topology and stability.
inspect_viewport
: Captures a visual snapshot of the mesh (Wireframe, Material, etc.).
stress_test_ui_parameters
: Simulates user parameter changes to verify stability.
run_blender_analysis
: Runs deep analysis tools (Print3D, UV Overlap, Face Area).
visual_regression_diff
: [Phase 1] Overlays wireframes of two versions to visualize changes.
inspect_uv_heatmap
: [Phase 2] Generates a heatmap of UV stretching.
audit_performance
: [Phase 3] Checks execution time and polycount against budgets.
debug_csg_tree
: [Phase 4] Visualizes hidden boolean "cutter" objects.
visualize_edge_slots
 (NEW): [Phase 4] Highlights specific edge slots (seams, bevels) to verify procedural selection logic.
verify_material_logic
 (NEW): [Phase 4] Static analysis to ensure the cartridge correctly retrieves the MAT_TAG layer for material assignment dynamics.

1. mechanic.py
Tools for automated code injection and quick fixes.

repair_topology_logic
: Injects mandatory Phase 3 cleanup (remove_doubles, recalc_face_normals).
fix_uv_pinching
: Adjusts UV smart_project margins to prevent pinching.
resolve_context_errors
: Replaces viewport-dependent bpy.ops with data-dependent bmesh.ops.
ensure_imports
: Checks for and adds missing imports (bpy, bmesh, mathutils).
check_scale_safety
: [Phase 5] Detects microscopic parameters that lead to merge errors.
inject_boolean_jitter
: [Phase 5] Injects random offsets to prevent co-planar boolean failures.
inject_standard_slots
: [Phase 5] Injects the mandatory
slots
 dictionary if missing.

1. knowledge.py
